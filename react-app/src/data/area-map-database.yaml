areas:
  - id: dungeon-room-1
    name: Dark Chamber
    description: A small stone chamber with a single door to the north.
    tilesetId: dungeon-grey-stone
    grid: |-
      ##########
      ####D#####
      ##........
      #.........
      #.........
      #.........
      #.........
      #.........
      ##........
      ##########
    playerSpawn:
      x: 5
      'y': 7
      direction: North
    interactiveObjects:
      - id: chest-1
        type: chest
        x: 2
        'y': 2
        state: closed
        spriteId: biomes-76
        data:
          gold: 50
          items:
            - health-potion
            - rusty-sword
    npcSpawns: []
    encounterZones:
      - id: goblin-ambush
        x: 5
        'y': 3
        encounterId: goblin-patrol
        triggerType: enter
        oneTime: true
  - id: dungeon-corridor-1
    name: Twisting Corridor
    description: A long stone corridor with rooms branching off.
    tilesetId: dungeon-grey-stone
    grid: |-
      #####################
      #...................#
      #.###D###...###D#####
      #.#.....#...#......##
      #.#.....#...#......##
      #.#.....#...#########
      #.###D###..........##
      #..................##
      #.###D###...###D#####
      #.#.....#...#.....###
      #.#.....#...#.....###
      #.#######...#########
      #..................##
      #####################
    playerSpawn:
      x: 2
      'y': 1
      direction: East
    interactiveObjects: []
    npcSpawns: []
  - id: dungeon-brown-room
    name: Brown Brick Chamber
    description: A warm brown brick room
    tilesetId: dungeon-brown-brick
    grid: |-
      #######
      #.....#
      #..D..#
      #.....#
      #######
    playerSpawn:
      x: 3
      'y': 3
      direction: North
    interactiveObjects: []
    npcSpawns: []
  - id: cave-entrance
    name: Cave Entrance
    description: A natural cave entrance
    tilesetId: dungeon-cave
    grid: |-
      ########
      #......#
      #..D...#
      #......#
      ########
    playerSpawn:
      x: 3
      'y': 3
      direction: North
    interactiveObjects: []
    npcSpawns: []
  - id: test-room
    name: Test Chamber
    description: A simple test room for development
    tilesetId: dungeon-grey-stone
    grid: |-
      ####################
      #...#....#.........#
      #...D....#.........#
      #...#....#.........#
      ######..############
      #...#....#..#......#
      #...D....D..#......#
      #...#....#..#......#
      #...#....#..#......#
      ######D###..D......#
      #...........#......#
      #...........#......#
      #...........#......#
      #...........#......#
      ######D#########D###
      ##..........#......#
      #...........#......#
      #...........#......#
      #...........#......#
      ####################
    playerSpawn:
      x: 2
      'y': 3
      direction: North
    interactiveObjects: []
    npcSpawns: []
    encounterZones: []
  - id: event-demo-map
    name: Event System Demo
    description: Demonstrates all event system features
    tilesetId: dungeon-grey-stone
    grid: |-
      ##########
      #........#
      #........#
      #...D....#
      #........#
      ##########
    playerSpawn:
      x: 2
      'y': 2
      direction: North
    interactiveObjects: []
    npcSpawns: []
    encounterZones: []
    eventAreas:
      - id: entrance-area
        x: 1
        'y': 1
        width: 3
        height: 2
        description: Shows welcome message on first visit
        events:
          - id: first-visit
            trigger: on-enter
            oneTime: true
            preconditions: []
            actions:
              - type: ShowMessage
                message: Welcome to the Event System Demo!
              - type: SetGlobalVariable
                variableName: visited-demo
                value: true
      - id: door-area
        x: 4
        'y': 3
        width: 1
        height: 1
        description: Door that unlocks with key
        events:
          - id: door-locked
            trigger: on-step
            preconditions:
              - type: GlobalVariableIs
                variableName: has-demo-key
                expectedValue: false
            actions:
              - type: ShowMessage
                message: The door is locked. You need a key.
          - id: door-unlock
            trigger: on-step
            oneTime: true
            preconditions:
              - type: GlobalVariableIs
                variableName: has-demo-key
                expectedValue: true
            actions:
              - type: ShowMessage
                message: You use the key to unlock the door!
              - type: SetGlobalVariable
                variableName: door-unlocked
                value: true
      - id: key-area
        x: 7
        'y': 1
        width: 1
        height: 1
        description: Key pickup location
        events:
          - id: pickup-key
            trigger: on-step
            oneTime: true
            preconditions: []
            actions:
              - type: ShowMessage
                message: You found a key!
              - type: SetGlobalVariable
                variableName: has-demo-key
                value: true
      - id: step-counter-area
        x: 5
        'y': 4
        width: 3
        height: 1
        description: Counts steps and messages on exit
        events:
          - id: init-counter
            trigger: on-enter
            oneTime: true
            preconditions: []
            actions:
              - type: SetGlobalVariable
                variableName: entered-counter-area
                value: true
          - id: count-steps
            trigger: on-step
            preconditions: []
            actions:
              - type: ShowMessage
                message: You stepped in the counting area
          - id: exit-message
            trigger: on-exit
            preconditions:
              - type: GlobalVariableIs
                variableName: entered-counter-area
                expectedValue: true
            actions:
              - type: ShowMessage
                message: Thanks for visiting the counting area!
